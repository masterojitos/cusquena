<?php
//$data = "data:image/png;base64,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";
$data = filter_input(INPUT_POST, 'data');
$data = explode(';', $data);
$extension = explode('/', $data[0]);
$data = explode(',', end($data));
$dni = filter_input(INPUT_POST, 'dni', FILTER_SANITIZE_NUMBER_INT);
file_put_contents('userfiles/' . $dni . '.' . end($extension), base64_decode(end($data)));
